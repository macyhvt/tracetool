"use strict";if("undefined"==typeof Storage)throw new Error("Your web browser does not support HTML5 web storage technology.");if("undefined"==typeof Tether)throw new Error("The Bootstrap JavaScript requires lib Tether for Popover support.");if("undefined"==typeof jQuery)throw new Error("The FTK-JavaScript requires lib jQuery.");else"undefined"==typeof String.prototype.hashCode&&(String.prototype.hashCode=function(){var e,t,a=0;if(0===this.length)return a;for(e=0;e<this.length;e++)t=this.charCodeAt(e),a=(a<<5)-a+t,a|=0;return a}),window.FTKAPP.constants=window.FTKAPP.constants||{},window.FTKAPP.constants.maxlengthConfig={showOnReady:!1,alwaysShow:!0,appendToParent:!0,placement:"bottom-right-inside",validate:!0,warningClass:"small form-text text-muted",limitReachedClass:"small form-text text-danger",threshold:10},+function(e,t){"use strict";t.FTKAPP.functions.createRandomString=function(e){for(var t="",a=e||12;t.length<a;t+=Math.random().toString(36).substr(2));return t.substr(0,a).match(/.{1,3}/g).join("-").toUpperCase()},t.FTKAPP.functions.sendEncryptedMail=function(e){for(var a=e.split("|"),o="",r=0;r<=a.length-1;r+=1)o+=String.fromCharCode(a[r]);t.location.href="mailto:"+o},t.FTKAPP.functions.createWebStorage=function(e,a){e=e||t.FTKAPP.name||"webStorage";var o=t.FTKAPP.webStorage;if("object"==typeof o&&o.name==e)return o;if("object"!=typeof webStorage)throw"This functionality requires the JS webStorage library being loaded.";switch(a){case"session":var r=webStorage.createInstance({driver:sessionStorage,name:e});break;case"local":default:var r=webStorage.createInstance({driver:localStorage,name:e});}return r},t.FTKAPP.functions.closeAllDatalists=function(){e(this).next(".autocomplete-items").remove()},t.FTKAPP.functions.utf8_encode=function(e){return unescape(encodeURIComponent(e))},t.FTKAPP.functions.utf8_decode=function(e){return decodeURIComponent(escape(e))},t.FTKAPP.functions.linkToText=function(t){return alert("Further processing is temp. disabled because this functionality is currently instable. Kindly require further notice from the development department."),!1;var a=t||this,o=e(a),r=o.text()},t.FTKAPP.functions.parseQuery=function(e){return JSON.parse("{\""+e.replace(/&/g,"\",\"").replace(/=/g,"\":\"")+"\"}",function(e,t){return""===e?t:decodeURIComponent(t)})},t.FTKAPP.functions.getAllUrlParams=function(e){e.match(/^https?:/i)||e.match(/\/\/www\./i)||"1"!=e.split("?").length||(e="http://example.com/?"+e.split("?").pop()),e=decodeURI(e);var o=e?e.split("?")[1]:t.location.search.slice(1),r={};if(o){o=o.split("#")[0];for(var s=o.split("&"),n=0;n<s.length;n++){var l=s[n].split("="),a=l[0],d="undefined"==typeof l[1]||l[1];if(a=a.toLowerCase(),"string"==typeof d&&(d=d.toLowerCase()),a.match(/\[(\d+)?\]$/)){var c=a.replace(/\[(\d+)?\]/,"");if(r[c]||(r[c]=[]),a.match(/\[\d+\]$/)){var m=/\[(\d+)\]/.exec(a)[1];r[c][m]=d}else r[c].push(d)}else r[a]?r[a]&&"string"==typeof r[a]?(r[a]=[r[a]],r[a].push(d)):r[a].push(d):r[a]=d}}else console.warn("getAllUrlParams NOTICE: The passed in URL is no fully qualified URL. If there is a query string it could not be found.");return r},e(".js-hide").hide(),setTimeout(function(){var t,a,o;e(".alert-dismissible.autohide").parent().fadeOut(function(){t=e(this),a=t.parent(),o=t.closest(".overlay"),t.remove(),o.children().length||o.fadeOut(function(){e(this).remove()})})},5e3),e(t).scroll(function(){200<e(this).scrollTop()?e("#scrollTopBtn").stop().fadeIn():e("#scrollTopBtn").stop().fadeOut()}),e("#scrollTopBtn").click(function(){return e("html, body").animate({scrollTop:0},250),!1}),e("[role=\"alert\"]").on("close.bs.alert",function(){e(this).trigger("closed.bs.alert")}).on("closed.bs.alert",function(){e(this).closest(".overlay").fadeOut(function(){e(this).remove()})}),e(".alert-memorizable").on("close.bs.alert",function(){}),e(".collapse").on("shown.bs.collapse",function(){e(this).parent(".card").find(".fa-caret-right").addClass("fa-caret-down").removeClass("fa-caret-right")}).on("hidden.bs.collapse",function(){e(this).parent(".card").find(".fa-caret-down").addClass("fa-caret-right").removeClass("fa-caret-down")}).collapse({toggle:!1}),e(".dropdown-menu a.dropdown-toggle").on("click",function(){let t=e(this),a=t.next(".dropdown-menu");return t.next().hasClass("show")||t.parents(".dropdown-menu").first().find(".show").removeClass("show"),a.toggleClass("show"),t.parents("li.nav-item.dropdown.show").on("hidden.bs.dropdown",function(){e(".dropdown-submenu .show").removeClass("show")}),"false"==t.attr("aria-expanded")?t.attr({"aria-expanded":"true"}):t.attr({"aria-expanded":"false"}),!1}),e("[data-toggle=\"popover\"]").on("show.bs.popover",function(){var t=e(this);t.is(".autohide")&&setTimeout(function(){void 0!==t.attr("aria-describedby")&&t.click()},t.data("timeout")||15e3)}).popover(),e(".bs-colorpicker").colorpicker().on("colorpickerChange",function(t){let a=e(this),o=e(a.data("target"));a.is(".bs-colorpicker-background")&&o.css("background-color",null===t.color?"#FFF":t.color.toString()),a.is(".bs-colorpicker-font")&&o.css("color",null===t.color?"inherit":t.color.toString())}),e(".date").datepicker().on("changeMonth",function(){}).on("changeYear",function(){}).on("changeDecade",function(){}).on("changeCentury",function(){}).on("clearDate",function(){}).on("show.bs.datepicker",function(){}).on("keydown","input.datepicker",function(e){switch(e.keyCode){case 40:case 39:case 38:case 37:case 27:break;default:e.preventDefault();}}).on("changeDate",function(){e(this).addClass("dateChanged")}).on("hide.bs.datepicker",function(){let t,a=e(this),o=a.find(":input[type]").blur();a.is(".dateChanged")&&(t=a.closest("form").addClass("submitted"))}),e(".date-range").datepicker({inputs:e(".rangepicker")}),e("textarea[maxlength], .maxlength").maxlength(t.FTKAPP.constants.maxlengthConfig),e.ui.autocomplete.prototype._resizeMenu=function(){var e=this.menu.element;e.outerWidth(this.element.outerWidth())},e("#articlesList").queue(function(t){var a=e(this),o=a.data("load")||void 0,r=a.data("action");o="undefined"==typeof o?o:o+"List",a.addClass("loading"),e.ajax({type:"GET",url:r,data:"format=json",cache:!1}).fail(function(){try{}catch(e){console.error("Error:",e)}}).done(function(t){var o=JSON.parse(t),r=e.makeArray(Object.keys(o)),s=e.isPlainObject(r),n=e.isArray(r);a.autocomplete("option","source",r)}).always(function(){}),t()}).autocomplete({context:this,autoFocus:!0,minLength:3,delay:100,position:{my:"left top",at:"left bottom"},classes:{"ui-autocomplete":"list-unstyled autocomplete-items"},search:function(){},response:function(){},focus:function(){},open:function(){},select:function(){},close:function(t,a){var o,r=e(this),s=r.closest("form"),n=e("#articles-list"),l=n.find("> .list-item"),i="undefined"==typeof a.item?e(t.target).val():a.item.value;i=i.trim(),""==i?(s.removeClass("hasKeyword"),l.show()):(s.addClass("hasKeyword"),l.each(function(){var t=e(this);t.data("rel").toLowerCase()===i.toLowerCase()?o=t.find("> a:first-child"):t.hide()})),t.preventDefault()},change:function(){}}),e("#partsList").queue(function(t){var a=e(this),o=a.data("load")||void 0,r=a.data("action");o="undefined"==typeof o?o:o+"List",a.addClass("loading"),e.ajax({type:"GET",url:r,data:"format=json",cache:!1}).fail(function(){try{}catch(e){console.error("Error:",e)}}).done(function(t){var o=JSON.parse(t),r=e.makeArray(Object.keys(o)),s=e.isPlainObject(r),n=e.isArray(r);a.autocomplete("option","source",r)}).always(function(){}),t()}).autocomplete({context:this,autoFocus:!0,minLength:1,delay:100,position:{my:"left top",at:"left bottom"},classes:{"ui-autocomplete":"list-unstyled autocomplete-items"},search:function(){},response:function(){},focus:function(){},open:function(){},select:function(){},close:function(t,a){var o,r=e(this),s=r.closest("form"),n=e("#parts-list"),l=n.find("> .list-item"),i="undefined"==typeof a.item?e(t.target).val():a.item.value;i=i.trim(),""==i?(s.removeClass("hasKeyword"),l.show()):(s.addClass("hasKeyword"),l.each(function(){var t=e(this);t.data("rel").toLowerCase()===i.toLowerCase()?o=t.find("> a:first-child"):t.hide()})),t.preventDefault()},change:function(){}}),e(".timeline .form-control").on("keydown",function(e){13==e.keyCode&&e.preventDefault()}),e(".bs-tab-proxy").on("click",function(t){t.preventDefault();var a=e(this),o=a.data("target");try{switch(!0){case a.is(".bs-tab-proxy-prev"):e(o+" li a.active").parent("li").prev("li").find("> a").trigger("click");break;case a.is(".bs-tab-proxy-next"):e(o+" li a.active").parent("li").next("li").find("> a").trigger("click");}}catch(e){console.warn("The following error occured:",e)}}),e("a[data-toggle=\"cursorLoading\"]").on("click",function(a){a.preventDefault(),e(document.body).css("cursor","wait"),setTimeout(function(){t.location.href=e(a.currentTarget).attr("href")},500)}),e("[data-toggle=\"tooltip\"]").tooltip(),e("form.form").on("select",function(){}).on("input",function(){}).on("change",function(){}).on("blur",function(){}).on("contextmenu",function(){}).on("focus",function(){}).on("focusin",function(){}).on("focusout",function(t){let a=e(t.target);"string"==typeof a.val()&&a.val(a.val().trim())}).on("invalid",function(){}).on("reset",function(){var t=e(this);t.find(":input.form-control").each(function(e,t){t.val("")})}).on("search",function(){}).on("submit",function(){}),e("form.validate").validate({errorClass:"text-danger",errorElement:"span",rules:{selectProcess:{depends:function(t){console.log("element being validated",t),console.log("element being validated neighbour",e(t).next()),console.log("element being validated neighbour > child",e(t).next().children(0))}}},messages:{selectProcess:"Please enter your first name"}}),e(".modal").on("show.bs.modal",function(a){var o=e(this),r=e(a.relatedTarget),s=r.data("modalTitle")||"",n=r.data("modalContent")||"",l=r.data("modalSubmittable")||!1;if(n=atob(n),n=""==n?"&hellip;":t.FTKAPP.functions.utf8_decode(n),o.find(".modal-title").html(s.trim()).end().find(".modal-body").html(n.trim()),l&&!o.find(".modal-footer .btn-submit").length){o.find(".modal-footer").append("<button type=\"submit\" class=\"btn btn-sm btn-primary btn-submit\" form=\""+o.find(".modal-body > form").attr("id")+"\">"+t.FTKAPP.translator.map.COM_FTK_BUTTON_SUBMIT_TEXT+"</button>");var i=o.find(".modal-footer > .btn-submit");i.length&&i.on("click",function(){return confirm(t.FTKAPP.translator.map.COM_FTK_DIALOG_ARE_YOU_SURE_TEXT+" "+t.FTKAPP.translator.map.COM_FTK_HINT_THIS_STEP_CANNOT_BE_REVERTED_TEXT)})}}).on("shown.bs.modal",function(){var t=e(this).find("input.autofocus").filter(":first-of-type");t.trigger("focus")}).on("hide.bs.modal",function(){}).on("hidden.bs.modal",function(){e(this).find(".modal-body").html("&hellip;").end().find(".modal-footer").find(".btn").not(".btn-close").remove()})}(jQuery.noConflict(),window),jQuery(window).on("load",function(){"use strict";var e=jQuery;e("a[href*=\"#\"]").not("[href=\"#\"]").not("[href=\"#0\"]").click(function(t){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var a=e(this.hash);a=a.length?a:e("[name="+this.hash.slice(1)+"]"),a.length&&(t.preventDefault(),e("html, body").animate({scrollTop:a.offset().top},1e3,function(){var t=e(a);return(t.trigger("focus"),!t.is(":focus"))&&void(t.attr("tabindex","-1"),t.trigger("focus"))}))}}),"undefined"!=typeof slick&&e("#slider-article.slick-slider").on("init",function(){e(this).find("> .slick-list").addClass("modal-image").end().queue(function(t){e(this).addClass("chocolat-initialized").Chocolat(),t()}).fadeIn("slow")}).slick({adaptiveHeight:!0,draggable:!1,accessibility:!1,infinite:!1,arrows:!1}),e("form.form-autosubmit").removeClass("form-autosubmit").submit(),e("form.form-validate").validate({validClass:"",errorClass:"text-danger",errorElement:"small",errorElementClass:"is-invalid",highlight:function(t,a){e(this.settings.errorElement).addClass("col-auto"),e(t).addClass(this.settings.errorElementClass).removeClass(a)},unhighlight:function(t,a){e(t).addClass(this.settings.validClass).removeClass(this.settings.errorElementClass).removeClass(a)}}),e("form[data-monitor-changes=\"true\"]").each(function(){var t=e(this);t.data({hashCode1:t.serialize().hashCode()}).find(":input").not(":button").change(function(){t.data({hashCode2:t.serialize().hashCode()}).attr("data-is-changed",!0)})}),e("form[data-toggle=\"loadData\"]").each(function(){var t=e(this),a=t.data("load")||void 0,o=t.data("action");a="undefined"==typeof a?a:a+"List",t.addClass("loading"),e.ajax({type:"GET",url:o,data:"format=json",cache:!1}).fail(function(){try{}catch(e){console.error("Error:",e)}}).done(function(o){var r=JSON.parse(o),s=e.isPlainObject(r),n=e.isArray(r);t.data(a,n||s?r:[])}).always(function(){t.data({currentFocus:void 0}).removeClass("loading")})}),e("input.autofocus").queue(function(){e(this).trigger("focus"),next()}),e(document.body).on("beforeReset.ftk.element",function(){}).on("afterReset.ftk.element",function(t){e(t.target).nextAll(".autocomplete-items").remove()}).on("change",":input.auto-submit",function(){let t,a=e(this),o=e(a.attr("data-target")),r=a.attr("form");t=e(a.attr("form")),t=t.length?t:a.closest("form"),t=t.length?t:e("document.forms."+r),o.addClass("submitted").queue(function(){t.removeClass("submitted").submit()})}).on("change","#inputLocale",function(){let t=e(this),a=window.location.search,o=new URL(window.location),r=new URLSearchParams(o.search);""==t.prevAll("input[type]").val().trim()&&(a=window.FTKAPP.functions.getAllUrlParams(window.location.href),a.hl=t.val(),window.location.search=e.param(a))}).on("change","[data-toggle=\"buttons\"]",function(t){let a=e(this),o=e(t.target),r=o.is(":checked");!0==r?o.attr({checked:"checked"}):o.removeAttr("checked")}).on("change__DISABLED","[data-toggle=\"loadLayout\"]",function(){var t=e(this),a=e(t.data("target")),o=t.data("load")||void 0,r=t.data("action"),s={type:"GET",url:r,data:"article="+parseInt(e(this).val())+"&format=json",cache:!1};t.addClass("loading"),e.ajax(s).fail(function(){try{}catch(e){console.error("Error:",e)}}).done(function(r){var s=JSON.parse(r),n=e.isPlainObject(s),l=e.isArray(s);t.data(o,l||n?s:[]),a.html(atob(t.data("processListTree").html))}).always(function(){t.data({currentFocus:void 0}).removeClass("loading")})}).on("change","[data-toggle=\"changeFormLocation\"]",function(){var t=e(this),a=t.closest("form"),o=[a.attr("action"),t.attr("name")+"="+t.find(":selected").val().trim()].join("&");window.location.href=[window.location.origin,window.location.pathname.replace("index.php",o)].join("")}).on("change","[data-toggle=\"loadHTML\"]",function(){var t=e(this),a=e(t.data("target")),o=t.data("action"),r={article:t.find("option:selected").text().trim(),format:"json"};a.addClass("loading"),e.get(o,r,function(t){var o;"object"==typeof Base64&&Base64.extendString?(Base64.extendString(),o=t.html.fromBase64()):o=atob(t.html),a.fadeOut("fast",function(){a.removeClass("loading").addClass("loaded").html(function(){return e("<div/>").append(e.parseHTML(o)).find("#articleProcessTree").html()}).fadeIn()})}).fail(function(e,t,a){try{alert(a)}catch(e){console.error("Error:",e)}}).done(function(){}).always(function(){})}).on("change","[data-toggle=\"openOrganisationUsers\"]",function(){var t=e(this),a=e(t.data("target")),o=t.find(":selected");window.location.href=[window.location.origin,window.location.pathname,"?",o.val().split("?").pop()].join("")}).on("change","[data-toggle=\"procSelected\"]",function(){var t=e(this),a=e(t.data("target")),o=t.find(":selected");isNaN(parseInt(o.val()))?a.prop("disable",!0).attr("disabled",!0):a.prop("disable",!1).attr("disabled",!1)}).on("change","[data-toggle=\"procDrawingSelected\"]",function(){if(this.files.length){var t=e(this),a=t.parents(".form-row").find(t.data("target"));a.length&&(a.val(this.files[0].name.split(/\.(pdf|PDF)$/)[0]).trigger("focusout"),t.trigger("focusout"))}}).on("change","[data-toggle=\"textBolder\"]",function(){let t,a=e(this),o=e(a.data("target")),r=a,s=r.find("> i"),n=!1;t=r.is(".btn-checkbox")?a.find(":input[type=\"checkbox\"]"):void 0,t=r.is(".btn-radio")?a.find(":input[type=\"radio\"]"):t,n=t.is(":checked"),n?a.addClass("active").find("> .label").text(a.data("labelUnchecked")):a.removeClass("active").find("> .label").text(a.data("labelChecked")),o.css({"font-weight":n?"bold":"normal"})}).on("click","[data-toggle=\"buttons\"]",function(t){let a,o=e(this),r=e(t.target),s=o.closest(".card")||o.closest(".col")||void 0,n=o.find("> label"),l=n.find("> i"),i=!1;a=n.is(".btn-checkbox")?o.find(":input[type=\"checkbox\"]"):void 0,a=n.is(".btn-radio")?o.find(":input[type=\"radio\"]"):a,i=a.is(":checked"),o.queue(function(e){i?(l.removeClass(l.data("iconChecked")).addClass(l.data("iconUnchecked")),n.find(n.attr("data-target")).text(n.data("labelUnchecked"))):(l.removeClass(l.data("iconUnchecked")).addClass(l.data("iconChecked")),n.find(n.attr("data-target")).text(n.data("labelChecked"))),"undefined"!=typeof s&&s.toggleClass("alert-success"),e()})}).on("click","[data-toggle=\"addArticleProcess\"]",function(){var t=e(this),a=e(t.attr("data-target")),o=t.parent(),r=o.find(".process").length,s=["<option value=\"\">&ndash; "+window.FTKAPP.translator.map.COM_FTK_LABEL_SELECT_TEXT+" &ndash;</option>"];e.each(window.FTKAPP.processes,function(e,t){s.push("<option value=\""+e+"\">"+t+"</option>")}),e("<li class=\"list-item\" style=\"display:none\"><div class=\"form-row process my-lg-3\"><div class=\"col col-lg-5\"><select class=\"form-control selectProcess\" name=\"processes[]\" title\""+window.FTKAPP.translator.map.COM_FTK_HINT_PLEASE_SELECT_TEXT+"\" required=\"\" data-toggle=\"procSelected\" data-target=\".form-control-input-file\" data-rule-required=\"true\" data-msg-required\""+window.FTKAPP.translator.map.COM_FTK_HINT_PLEASE_SELECT_TEXT+"\" >"+s.join("")+"</select></div><div class=\"col col-lg-3 position-relative\"><input type=\"text\" class=\"form-control form-control-drawing-number\" name=\"drawings[]\" value=\"\" title=\""+window.FTKAPP.translator.map.COM_FTK_HINT_PLEASE_ADD_DRAWING_TEXT+"\" placeholder=\""+window.FTKAPP.translator.map.COM_FTK_LABEL_CURRENT_DRAWING_NUMBER_TEXT+"\" readonly=\"\" required=\"\" aria-live=\"polite\" data-rule-required=\"true\" data-msg-required=\""+window.FTKAPP.translator.map.COM_FTK_HINT_MANDATORY_FIELD_TEXT+"\" ></div><div class=\"col col-lg-3\"><input type=\"file\" multiple=\"false\" class=\"form-control form-control-input-file\" name=\"drawings[]\" title=\""+window.FTKAPP.translator.map.COM_FTK_HINT_PLEASE_ADD_DRAWING_TEXT+"\" accept=\"application/pdf, .pdf\" style=\"padding-top:.25rem; padding-bottom:.15rem; padding-left:0; border:unset; background:inherit\" disabled=\"\" required=\"\" data-toggle=\"procDrawingSelected\" data-target=\".form-control-drawing-number\" data-rule-required=\"true\" data-msg-required=\""+window.FTKAPP.translator.map.COM_FTK_HINT_MANDATORY_FIELD_TEXT+"\" ></div><button type=\"button\" class=\"btn ml-lg-3\" data-toggle=\"deleteListItem\" data-target=\"#artProcesses\" title=\""+window.FTKAPP.translator.map.COM_FTK_LABEL_PROCESS_DELETE_THIS_TEXT+"\" aria-label=\""+window.FTKAPP.translator.map.COM_FTK_LABEL_PROCESS_DELETE_THIS_TEXT+"\"><i class=\"far fa-trash-alt\"></i> <span class=\"sr-only\">"+window.FTKAPP.translator.map.COM_FTK_LABEL_DELETE_TEXT+"</span></button></div></li>").appendTo(a).fadeIn(function(){e(this).find("select").trigger("focus")})}).on("click","[data-toggle=\"addErrorCatalogItem\"]",function(){var t=e(this),a=e(t.attr("data-target")),o=t.parent(),r=a.find(".card"),s=r.last(),n=a.data("nextId"),l=r.length?parseInt(s.attr("id").split("-").pop()):n,i=l<n?n:0<r.length?l+1:l;e("<div class=\"card mb-3\" id=\"card-"+i+"\"><div class=\"card-header border-bottom-0\" id=\"heading-"+i+"\"><div class=\"btn-toolbar d-inline-block float-right\" role=\"toolbar\" aria-label=\"Toolbar with button groups\"><div class=\"btn-group\" role=\"group\" aria-label=\"First group\"><button type=\"submit\"class=\"btn btn-link btn-edit btn-submit btn-save allow-window-unload\"title=\""+window.FTKAPP.translator.map.COM_FTK_LABEL_CHANGES_SAVE_TEXT+"\"aria-label=\""+window.FTKAPP.translator.map.COM_FTK_LABEL_CHANGES_SAVE_TEXT+"\"><i class=\"fas fa-save\"></i></button><button type=\"button\"class=\"btn btn-link btn-edit btn-trashbin\"form=\"editCatalogForm\"data-toggle=\"deleteListItem\"data-parent=\"#card-"+i+"\"data-target=\"#errorCatalog\"title=\""+window.FTKAPP.translator.map.COM_FTK_LABEL_PROCESS_DELETE_THIS_TEXT+"\"aria-label=\""+window.FTKAPP.translator.map.COM_FTK_LABEL_PROCESS_DELETE_THIS_TEXT+"\"><i class=\"far fa-trash-alt\"></i><span class=\"sr-only\">"+window.FTKAPP.translator.map.COM_FTK_LABEL_PROCESS_DELETE_TEXT+"</span></button></div></div><input type=\"text\"class=\"form-control font-weight-bold d-inline-block w-75 maxlength\"name=\"errors["+i+"][name]\"value=\"\"minlength=\"3\"maxlength=\"100\"required autofocusdata-rule-required=\"true\"data-msg-required=\""+window.FTKAPP.translator.map.COM_FTK_HINT_MANDATORY_FIELD_TEXT+"\"data-rule-minlength=\"3\"data-msg-minlength=\""+window.FTKAPP.translator.map.COM_FTK_HINT_TITLE_TOO_SHORT_TEXT+"\"data-rule-maxlength=\"100\"data-msg-maxlength=\""+window.FTKAPP.translator.map.COM_FTK_HINT_TITLE_TOO_LONG_TEXT+"\"></div><div id=\"collapse-"+i+"\" class=\"collapse show\" aria-labelledby=\"heading-"+i+"\"><div class=\"card-body pb-4\"><textarea class=\"form-control maxlength\"name=\"errors["+i+"][description]\"rows=\"3\"minlength=\"0\"maxlength=\"500\"data-rule-maxlength=\"500\"data-msg-maxlength=\""+window.FTKAPP.translator.map.COM_FTK_HINT_TEXT_TOO_LONG_TEXT+"\"></textarea></div></div></div>").appendTo(a).fadeIn(function(){e(this).find("textarea").maxlength(window.FTKAPP.constants.maxlengthConfig).end().find("input[type='text']").maxlength(window.FTKAPP.constants.maxlengthConfig).trigger("focus")})}).on("click","[data-toggle=\"addOrganisationProcess\"]",function(){var t=e(this),a=e(t.attr("data-target")),o=t.parent(),r=o.find(".process").length,s=["<option value=\"\">&ndash; "+window.FTKAPP.translator.map.COM_FTK_LABEL_SELECT_TEXT+" &ndash;</option>"];e.each(window.FTKAPP.processes,function(e,t){s.push("<option value=\""+e+"\">"+t+"</option>")}),e("<li class=\"list-item\" style=\"display:none\"><div class=\"form-row param my-lg-3\"><div class=\"col\"><select class=\"form-control\" name=\"processes[]\" title\""+window.FTKAPP.translator.map.COM_FTK_HINT_PLEASE_SELECT_TEXT+"\" required data-rule-required=\"true\" data-msg-required\""+window.FTKAPP.translator.map.COM_FTK_HINT_PLEASE_SELECT_TEXT+"\" >"+s.join("")+"</select></div><button type=\"button\" class=\"btn\" data-toggle=\"deleteListItem\" data-target=\"#orgProcesses\" title=\""+window.FTKAPP.translator.map.COM_FTK_LABEL_PROCESS_DELETE_THIS_TEXT+"\" aria-label=\""+window.FTKAPP.translator.map.COM_FTK_LABEL_PROCESS_DELETE_THIS_TEXT+"\"><i class=\"far fa-trash-alt\"></i> <span class=\"sr-only\">"+window.FTKAPP.translator.map.COM_FTK_LABEL_DELETE_TEXT+"</span></button></div></li>").appendTo(a).fadeIn(function(){e(this).find("select").trigger("focus")})}).on("click","[data-toggle=\"addTechnicalParam\"]",function(){var t=e(this),a=e(t.attr("data-target")),o=t.parent(),r=a.find(".form-control.dynamic-datalist"),s=r.last(),n=a.data("nextId"),l=r.length?parseInt(s.attr("id").split("-").pop()):n,i=l<n?n:0<r.length?l+1:l;e("<li class=\"list-item\"><div class=\"form-row param my-lg-3\"><div class=\"col autocomplete\"><input type=\"text\" class=\"form-control dynamic-datalist\" id=\"param-"+i+"\" name=\"params["+i+"]\" minlength=\"3\" maxlength=\"100\" title=\""+window.FTKAPP.translator.map.COM_FTK_HINT_MANDATORY_FIELD_TEXT+"\" placeholder=\""+window.FTKAPP.translator.map.COM_FTK_LABEL_PARAMETER_NAME_TEXT+"\" required=\"\" data-bind=\"parseDatalist\" data-list=\"techParams\" data-rule-required=\"true\" data-msg-required=\""+window.FTKAPP.translator.map.COM_FTK_HINT_MANDATORY_FIELD_TEXT+"\" data-rule-minlength=\"3\" data-msg-minlength\""+window.FTKAPP.translator.map.COM_FTK_HINT_NAME_TOO_SHORT_TEXT+"\" data-rule-maxlength=\"100\" data-msg-maxlength\""+window.FTKAPP.translator.map.COM_FTK_HINT_NAME_TOO_LONG_TEXT+"\" /></div><button type=\"button\" class=\"btn\" data-toggle=\"deleteListItem\" data-parent=\"processForm\" title=\""+window.FTKAPP.translator.map.COM_FTK_LABEL_TECHNICAL_PARAMETER_DELETE_THIS_TEXT+"\" ><i class=\"far fa-trash-alt\"></i> <span class=\"sr-only\">"+window.FTKAPP.translator.map.COM_FTK_LABEL_DELETE_TEXT+"</span></button></div></li>").appendTo(a).fadeIn(function(){e(this).find("input[type=\"text\"]").trigger("focus")})}).on("click","[data-toggle=\"deleteListItem\"]",function(){var t=e(this),a=e(t.data("parent")||t.parent());a.fadeOut("fast",function(){e(this).remove()})}).on("click","[data-toggle=\"generatePartDuplicate\"]",function(){console.clear(),console.warn("generatePartDuplicate");var t=e(this),a=e(t.data("part"));let r={base:[],processes:[]},s=[],n=0,l=window.FTKAPP.functions.getAllUrlParams(window.location.href);a.find("fieldset.duplicable").each(function(t,a){var o,s=e(a),n=s.data("procId");"undefined"==typeof n?(r.base=r.base||[],o=s.find(":input").not(":hidden").each(function(t,a){var o=e(a);r.base[o.attr("name")]=o.val().trim()})):(r.processes[n]=r.processes[n]||[],o=s.find(":input").not(":hidden").each(function(t,a){var o=e(a);r.processes[n][o.attr("name")]=o.val().trim()}))});let i=e("#mainModal");i.on("show.bs.modal",function(){var t,a=e(this);for(var o in t=e("<form/>",{action:window.location.href,method:"POST",class:"form-horizontal",id:"partProcessesForm"}),r.processes)if(r.processes.hasOwnProperty(o)){var l=r.processes[o],i=e("<div/>",{class:"form-check my-2"});i.append(e("<input/>",{type:"checkbox",class:"form-check-input",id:"pid-"+o,name:"pid[]",value:o,checked:"checked"}).on("change",function(){e(this).parent().toggleClass("active")})).append(e("<label/>",{for:"pid-"+o,class:"form-check-label ml-1",text:e("fieldset[data-proc-id=\""+o+"\"] > .fieldset-title").text()})),t.append(i)}a.find(".modal-title").text(window.FTKAPP.translator.map.COM_FTK_LABEL_PART_DUPLICATE_TEXT).end().find(".modal-body").html("<p class=\"alert alert-info\">"+window.FTKAPP.translator.map.COM_FTK_SYSTEM_MESSAGE_WHICH_PROCESSES_TO_DUPLICATE_TEXT+"</p>").append(t).end().find(".modal-footer").append(function(){return 0<e(this).find("button#btnContinue").length?void 0:e("<button/>",{class:"btn btn-sm btn-info btn-submit",id:"btnContinue",form:"partProcessesForm",text:window.FTKAPP.translator.map.COM_FTK_BUTTON_NEXT_TEXT,title:window.FTKAPP.translator.map.COM_FTK_LINK_TITLE_CONTINUE_TO_THE_NEXT_STEP_TEXT,"aria-label":window.FTKAPP.translator.map.COM_FTK_LINK_TITLE_CONTINUE_TO_THE_NEXT_STEP_TEXT}).on("click",function(){s=t.serialize(),console.log("selected 1:",s),s=decodeURI(s),console.log("selected 2:",s),s=window.FTKAPP.functions.getAllUrlParams("https://webservice.froetek.website?"+s),console.log("selected 3:",s),s=s.pid||[],console.log("selected 4:",s),a.find(".modal-footer").find("#btnContinue").remove().end().append(e("<button/>",{class:"btn btn-sm btn-info btn-submit",form:"partProcessesForm",text:window.FTKAPP.translator.map.COM_FTK_BUTTON_CREATE_TEXT,title:window.FTKAPP.translator.map.COM_FTK_BUTTON_CREATE_BATCH_TEXT,"aria-label":window.FTKAPP.translator.map.COM_FTK_BUTTON_CREATE_BATCH_TEXT}).on("click",function(){t.submit()})).end().find(".modal-body").find("p.alert-info").text(window.FTKAPP.translator.map.COM_FTK_SYSTEM_MESSAGE_HOW_MANY_DUPLICATES_TO_CREATE_TEXT).end().find("#partProcessesForm").empty().append(e("<input/>",{type:"hidden",name:"task",value:"genbatch"})).queue(function(t){var a=e(this);for(var o in s)e(e("<input/>",{type:"hidden",name:"pids[]",value:s[o]})).appendTo(a);t()}).append(e("<label/>",{for:"totalDuplicates",class:"col-form-label sr-only",text:window.FTKAPP.translator.map.COM_FTK_LINK_TITLE_NUMBER_OF_DUPLICATES_TEXT})).append(e("<input/>",{class:"form-control",id:"totalDuplicates",type:"number",name:"batch",min:"1",max:"1000",step:"1",placeholder:window.FTKAPP.translator.map.COM_FTK_LINK_TITLE_NUMBER_OF_DUPLICATES_TEXT}).on("change",function(){n=parseInt(e(this).val()),console.log("numDuplicates to create:",n)})).end()})})}).modal("show")}).on("click","[data-toggle=\"generatePartID\"]",function(t){var a,o=e(this),r=e("#"+o.attr("form")),s=e(o.attr("data-target")),n=r.data("action")||r.attr("action");t.preventDefault(),o.parent().append("<span class=\"d-block overlay-spinner position-absolute\" style=\"background: "+o.css("background-color")+"; color: "+o.css("color")+"\"><i class=\"fas fa-spinner fa-pulse fa-2x\"></i></span>").end().addClass("loading"),a=r.serialize()+"&format=json&task="+encodeURI(document.activeElement.getAttribute("value")),a=window.FTKAPP.functions.parseQuery(a),e.post(n,a,function(e){s.val(e).trigger("focusout")},"json").done(function(){}).fail(function(e,t,a){try{alert(a)}catch(e){console.error("Error:",e)}}).always(function(){o.parent().find(".overlay-spinner").remove().end().removeClass("loading")})}).on("click","[data-toggle=\"generatePassword\"]",function(t){var a,o,r=e(this),s=e("#"+r.attr("form")),n=e(r.attr("data-target")),l=s.data("action")||s.attr("action");t.preventDefault(),o=e("<span class=\"d-block overlay-spinner text-center position-absolute\"><i class=\"fas fa-spinner fa-pulse fa-2x\"></i></span>").css({visibility:"hidden",width:r.innerWidth()+"px",top:"0","margin-left":(r.outerWidth()-r.innerWidth())/2+"px","margin-top":"2px",background:r.css("background-color"),color:r.css("color")}),r.parent().append(o).queue(function(e){o.css({visibility:"visible"}),e()}).end().addClass("loading"),a=s.serialize()+"&format=json&task="+encodeURI(document.activeElement.getAttribute("value")),a=window.FTKAPP.functions.parseQuery(a),e.post(l,a,function(e){n.val(e).trigger("focusout")},"json").done(function(){}).fail(function(e,t,a){try{alert(a)}catch(e){console.error("Error:",e)}}).always(function(){r.parent().find(".overlay-spinner").remove().end().removeClass("loading")})}).on("click","[data-toggle=\"reset\"]",function(){var t=e(this),a=e(t.attr("data-target")),o=e.Event("beforeReset.ftk.element"),r=e.Event("afterReset.ftk.element");a.trigger(o,a).val("").trigger(r,a)}).on("click","[data-toggle=\"resetCellStyle\"]",function(){var t=e(this),a=e(t.attr("data-target"));a.each(function(){let t=e(this);t.is(".bs-colorpicker")&&t.val("").colorpicker("setValue",null),t.is(":checkbox")&&t.attr({checked:!1}).prop({checked:!1}),t.is(".btn-checkbox.active")&&t.removeClass("active").trigger("click")})}).on("click","[data-toggle=\"resetCellStyleAll\"]",function(){let t=e(this),a=e(t.attr("data-target"));a.trigger("click")}).on("click","form.bookPartsForm > button",function(){var t=e(this),a=e("#"+t.attr("form")),o=t.find("> i");t.data("classProcessing")&&t.removeClass(t.data("classDefault")).addClass(t.data("classProcessing")),o.data("classProcessing")&&o.removeClass(o.data("classDefault")).addClass(o.data("classProcessing")),"submit"==t.attr("type").toLowerCase()&&(t.attr({type:"button"}),a.on("submit.ftk.form",function(){}).on("fail.ftk.form",function(){o.removeClass(o.data("classProcessing")).addClass(o.data("classFail")),t.removeClass(t.data("classProcessing")).addClass(t.data("classFail"))}).on("done.ftk.form",function(){o.removeClass(o.data("classProcessing")).addClass(o.data("classSuccess")),t.removeClass(t.data("classProcessing")).addClass(t.data("classSuccess")).trigger(t.data("bind")),e(document).trigger("")}).on("always.ftk.form",function(){}).on("submitted.ftk.form",function(){}).submit())}).on("copyValue","form.bookPartsForm > button",function(){var t=e(this),a=e(t.data("copyFrom")),o=e(t.data("copyTo")),r=a.text(),s=t.data("copyDelete")||!1,n=t.data("copyDisable")||!1;if(a&&o&&r){var l=o.children();s&&a.empty(),l.length?l.filter(":last").text(r):o.text(r),n&&t.prop({disabled:!0}).attr({disabled:"disabled"})}}).on("submit","form",function(t){var a,o,r=e(this),s=e(t.target),n=e(s.data("target")),l=s.data("trigger")||"load",i=e.Event(l+".ftk.form"),d=e.Event("fail.ftk.form"),c=e.Event("done.ftk.form"),m=e.Event("always.ftk.form"),p=e.Event(("t"===l.substring(l.length-1)?l+"t":l)+"ed.ftk.form"),u=s.data("submit"),f=s.data("action")||s.attr("action"),g=s.attr("method"),T=s.data("modalOnError"),h=s.data("modalOnErrorTarget"),b=s.data("modalOnSuccess"),_=s.data("modalOnSuccessTarget");if("undefined"!=typeof T&&(T=T.split(":").pop()),"undefined"!=typeof b&&(b=b.split(":").pop()),"ajax"===u)t.preventDefault(),n.addClass("submitted"),a={type:g.toUpperCase(),url:f,data:null,cache:!1},s.addClass("submitted").find("input[name=\"format\"]").val("json"===s.data("format")?"json":""),o=s.serialize(),a.data=o,e.ajax(a).fail(function(e,t,a){s.trigger(d,[e,t,a]);try{"undefined"!=typeof window.FTKAPP.functions[T]&&"function"==typeof window.FTKAPP.functions[T]&&window.FTKAPP.functions[T].call(h)}catch(e){console.error("Error:",e)}}).done(function(t,a,o){try{n.fadeOut("fast",function(){n.html(t).queue(function(t){"undefined"!=typeof window.FTKAPP.functions[b]&&"function"==typeof window.FTKAPP.functions[b]&&window.FTKAPP.functions[b].call(_),n.is(":hidden")&&n.fadeIn("slow",function(){e(this).removeClass("submitted")}),t()})}).removeClass("submitted"),s.data({hashCode1:void 0,hashCode2:void 0}).trigger(c,[t,a,o])}catch(e){console.error("Error:",e)}}).always(function(e,t,a){s.removeClass("submitted").trigger(p,[e,t,a]).trigger(m,[e,t,a])});else if("ajax"!==u)s.data({hashCode1:void 0,hashCode2:void 0});else return console.warn("  Unhandled submit type"),!1}).on("input","[data-bind=\"parseDatalist\"]",function(){var t,o,r,s,n,l=e(this),d=l.val(),c=l.closest("form"),m=e(l.data("target")),p=l.parent().find("#"+this.id+"-autocomplete-list"),u=m.find("> .autocomplete-item"),f=!1,g=!1;if(!d)return p.remove(),!1;if(c.data({currentFocus:-1}),p.length?(t=document.createElement("DIV"),t.setAttribute("id",this.id+"-autocomplete-list"),t.setAttribute("class","autocomplete-items"),t.setAttribute("style","display:none"),p.replaceWith(t)):(t=document.createElement("DIV"),t.setAttribute("id",this.id+"-autocomplete-list"),t.setAttribute("class","autocomplete-items"),t.setAttribute("style","display:none"),l.parent().append(t)),e(t).css({width:l.outerWidth(),"margin-left":parseInt(l.prev().width())-parseInt(window.getComputedStyle(this)["border-left-width"])}),s=c.data(c.data("load")+"List"),g=e.isPlainObject(s),f=e.isArray(s),f)for(r=0;r<s.length;r++)s[r].substr(0,d.length).toUpperCase()==d.toUpperCase()&&(o=document.createElement("DIV"),o.setAttribute("class","autocomplete-item"),o.innerHTML="<strong>"+s[r].substr(0,d.length)+"</strong>",o.innerHTML+=s[r].substr(d.length),o.innerHTML+="<input type='hidden' value='"+s[r]+"'>",o.addEventListener("click",function(){l.val(this.getElementsByTagName("input")[0].value),e(t).remove(),"undefined"!=typeof window.FTKAPP.functions.closeAllDatalists&&"function"==typeof window.FTKAPP.functions.closeAllDatalists&&window.FTKAPP.functions.closeAllDatalists.call(l.get(0))}),e(t).append(o)),n=new RegExp("^"+d.toLowerCase(),"ig"),u.filter(function(){var t=e(this);return t.data("rel").toLowerCase().match(n)?(t.show(),!0):(t.hide(),!1)});else if(g)for(var T in s)s.hasOwnProperty(T)&&T.substr(0,d.length).toUpperCase()===d.toUpperCase()&&(o=document.createElement("DIV"),o.setAttribute("class","autocomplete-item"),o.innerHTML="<strong>"+T.substr(0,d.length)+"</strong>",o.innerHTML+=T.substr(d.length),o.innerHTML+="<span class='text-muted ml-3'>("+s[T]+")</span>",o.innerHTML+="<input type='hidden' value='"+T+"'>",o.addEventListener("click",function(){l.val(this.getElementsByTagName("input")[0].value),e(t).remove(),"undefined"!=typeof window.FTKAPP.functions.closeAllDatalists&&"function"==typeof window.FTKAPP.functions.closeAllDatalists&&window.FTKAPP.functions.closeAllDatalists.call(l.get(0))}),t.appendChild(o)),n=new RegExp("^"+d.toLowerCase(),"ig"),u.each(function(){var t=e(this);t.data("rel").toLowerCase().match(n)?t.show():t.hide()});var h=e(t);h.children().length&&h.fadeIn("fast")}).on("keydown","[data-bind=\"parseDatalist\"]",function(t){function a(e){return!!e&&void(o(e),l.data("currentFocus")>=e.length&&l.data({currentFocus:0}),0>l.data("currentFocus")&&l.data({currentFocus:e.length-1}),e[l.data("currentFocus")].classList.add("autocomplete-active"))}function o(e){if(!e)return!1;for(var t=0;t<e.length;t++)e[t].classList.remove("autocomplete-active")}var r,s=e(this),n=s.val(),l=s.closest("form"),i=e(s.data("target")),d=s.parent().find("#"+this.id+"-autocomplete-list"),c=i.find("> .autocomplete-item");r=document.getElementById(this.id+"-autocomplete-list"),r&&(r=r.getElementsByTagName("div")),40==t.keyCode?(l.data({currentFocus:l.data("currentFocus")+1}),a(r)):38==t.keyCode?(l.data({currentFocus:l.data("currentFocus")-1}),a(r)):27==t.keyCode?(s.val(""),"undefined"!=typeof window.FTKAPP.functions.closeAllDatalists&&"function"==typeof window.FTKAPP.functions.closeAllDatalists&&window.FTKAPP.functions.closeAllDatalists.call(s.get(0))):13==t.keyCode&&(t.preventDefault(),-1<l.data("currentFocus")?r&&r[l.data("currentFocus")].click():"undefined"!=typeof window.FTKAPP.functions.closeAllDatalists&&"function"==typeof window.FTKAPP.functions.closeAllDatalists&&window.FTKAPP.functions.closeAllDatalists.call(s.get(0)),c.each(function(){var t=e(this);t.data("rel").toLowerCase()!==s.val().trim().toLowerCase()&&t.hide()}))}).on("beforeReset.ftk.element",function(){}).on("afterReset.ftk.element",function(t,a){var o=e(this),r=e(a),s=o.val(),n=e(r.data("target")||[]),l=n.find("> .list-item");l.show()}).on("submit.ftk.form",function(){}).on("submitted.ftk.form",function(){})}).on("beforeunload",function(e){"use strict";if(0<document.querySelectorAll("form[data-is-changed=\"true\"]").length&&!e.target.activeElement.getAttribute("class").match("allow-window-unload"))return!1}).on("unload",function(){"use strict"}).on("error",function(){"use strict"}).on("beforeprint",function(){"use strict"}).on("afterprint",function(){"use strict"}).on("hashchange",function(){"use strict"}).on("message",function(){"use strict"}).on("offline",function(){"use strict"}).on("online",function(){"use strict"}).on("pagehide",function(){"use strict"}).on("pageshow",function(){"use strict";jQuery(document.forms[0]).find(":input.form-control").filter(":first").focus().select()}).on("popstate",function(){"use strict"}).on("resize",function(){"use strict"}).on("storage",function(){"use strict"});